
/* Riot v2.0.9, @license MIT, (c) 2015 Muut Inc. + contributors */
(function(){var e={version:"v2.0.9",settings:{}};"use strict";e.observable=function(e){e=e||{};var t={},n=0;e.on=function(i,r){if(typeof r=="function"){r._id=n++;i.replace(/\S+/g,function(e,n){(t[e]=t[e]||[]).push(r);r.typed=n>0})}return e};e.off=function(n,i){if(n=="*")t={};else if(i){var r=t[n];for(var o=0,u;u=r&&r[o];++o){if(u._id==i._id){r.splice(o,1);o--}}}else{n.replace(/\S+/g,function(e){t[e]=[]})}return e};e.one=function(t,n){if(n)n.one=1;return e.on(t,n)};e.trigger=function(n){var i=[].slice.call(arguments,1),r=t[n]||[];for(var o=0,u;u=r[o];++o){if(!u.busy){u.busy=1;u.apply(e,u.typed?[n].concat(i):i);if(u.one){r.splice(o,1);o--}else if(r[o]!==u){o--}u.busy=0}}return e};return e};(function(e,t){if(!this.top)return;var n=location,i=e.observable(),r=window,o;function u(){return n.hash.slice(1)}function f(e){return e.split("/")}function a(e){if(e.type)e=u();if(e!=o){i.trigger.apply(null,["H"].concat(f(e)));o=e}}var c=e.route=function(e){if(e[0]){n.hash=e;a(e)}else{i.on("H",e)}};c.exec=function(e){e.apply(null,f(u()))};c.parser=function(e){f=e};r.addEventListener?r.addEventListener(t,a,false):r.attachEvent("on"+t,a)})(e,"hashchange");var t=function(){var t={},n,i,r=/("|').+?[^\\]\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function *\()|([a-z_]\w*)/gi;return function(r,u){var f=e.settings.brackets||"{ }";if(f!=n){n=f.split(" ");i=a(/({[\s\S]*?})/)}return u?r&&(t[r]=t[r]||o(r))(u):i.test(r)};function o(e,t){t=(e||n.join("")).replace(a(/\\{/),"￰").replace(a(/\\}/),"￱").split(i);return new Function("d","return "+(!t[0]&&!t[2]&&!t[3]?u(t[1]):"["+t.map(function(e,t){return t%2?u(e,1):'"'+e.replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")').replace(/\uFFF0/g,n[0]).replace(/\uFFF1/g,n[1]))}function u(e,t){e=e.replace(/\n/g," ").replace(a(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),"");return/^\s*[\w- "']+ *:/.test(e)?"["+e.replace(/\W*([\w- ]+)\W*:([^,]+)/g,function(e,n,i){return i.replace(/\w[^,|& ]*/g,function(e){return f(e,t)})+'?"'+n.trim()+'":"",'})+'].join(" ")':f(e,t)}function f(e,t){return"(function(v){try{v="+(e.replace(r,function(e,t,n){return n?"(d."+n+"===undefined?window."+n+":d."+n+")":e})||"x")+"}finally{return "+(t?'!v&&v!==0?"":v':"v")+"}}).call(d)"}function a(e){return RegExp(e.source.split("{").join("\\"+n[0]).split("}").join("\\"+n[1]),e.global?"g":"")}}();function n(e){var t={val:e},n=e.split(/\s+in\s+/);if(n[1]){t.val=y+n[1];n=n[0].slice(y.length).trim().split(/,\s*/);t.key=n[0];t.pos=n[1]}return t}function i(e,t,n){var i={};i[e.key]=t;if(e.pos)i[e.pos]=n;return i}function r(e,r,o){p(e,"each");var u=e.outerHTML,a=e.previousSibling,c=e.parentNode,l=[],s=[],d;o=n(o);r.one("update",function(){c.removeChild(e)}).one("mount",function(){if(c.stub)c=r.root}).on("update",function(){var e=t(o.val,r);if(!e)return;if(!Array.isArray(e)){var n=JSON.stringify(e);if(n==d)return;d=n;s.map(function(e){e.unmount()});s=l=[];e=Object.keys(e).map(function(t){return i(o,t,e[t])})}h(l,e).map(function(e){var t=l.indexOf(e),n=s[t];if(n){n.unmount();l.splice(t,1);s.splice(t,1)}});var p=c.childNodes,v=[].indexOf.call(p,a);h(e,l).map(function(t,n){var a=e.indexOf(t);if(!d&&o.key)t=i(o,t,a);var l=new f({tmpl:u},{before:p[v+1+a],parent:r,root:c,loop:true,item:t});s.splice(a,0,l)});l=e.slice()})}function o(e,t,n){m(e,function(e){if(e.nodeType!=1)return;s(e.attributes,function(n){if(/^(name|id)$/.test(n.name))t[n.value]=e})})}function u(e,t,n){function i(e,t,i){if(t.indexOf(y)>=0){var r={dom:e,expr:t};n.push(d(r,i))}}m(e,function(e){var n=e.nodeType;if(n==3&&e.parentNode.tagName!="STYLE")i(e,e.nodeValue);if(n!=1)return;var o=e.getAttribute("each");if(o){r(e,t,o);return false}s(e.attributes,function(t){var n=t.name,r=t.value;var o=n.split("__")[1];i(e,r,{attr:o||n,bool:o});if(o){p(e,n);return false}});var u=b[e.tagName.toLowerCase()];if(u)u=new f(u,{root:e,parent:t})})}function f(n,i){var r=e.observable(this),f=[],a={},c=i.parent,m=i.loop,h=i.root,g=i.opts,b=i.item;if(!m&&h.riot)return;h.riot=1;g=g||{};d(this,{parent:c,root:h,opts:g});d(this,b);s(h.attributes,function(e){var t=e.name,n=e.value;a[t]=n;if(n.indexOf(y)>=0){p(h,t);return false}});function w(){Object.keys(a).map(function(e){g[e]=t(a[e],c||r)})}w();var x=v(n.tmpl),j;o(x,this);this.update=function(e,t){d(r,e);d(r,b);r.trigger("update");w();l(f,r,b);r.trigger("updated")};this.unmount=function(){var e=m?j:h,t=e.parentNode;if(t){t.removeChild(e);r.trigger("unmount");c&&c.off("update",r.update)}};function C(){if(m){j=x.firstChild;h.insertBefore(j,i.before||null)}else{while(x.firstChild)h.appendChild(x.firstChild)}if(h.stub)r.root=h=c.root;r.trigger("mount");c&&c.on("update",r.update).one("unmount",r.unmount)}if(n.fn)n.fn.call(this,g);u(x,this,f);this.update();C()}function a(e,t,n,i,r){n[e]=function(e){e=e||window.event;e.which=e.which||e.charCode||e.keyCode;e.target=e.target||e.srcElement;e.currentTarget=n;e.item=r;if(t.call(i,e)!==true){e.preventDefault&&e.preventDefault();e.returnValue=false}i.update()}}function c(e,t,n){if(e){e.insertBefore(n,t);e.removeChild(t)}}function l(e,n,i){s(e,function(e){var r=e.dom,o=e.attr,u=t(e.expr,n);if(u==null)u="";if(e.value===u)return;e.value=u;if(!o)return r.nodeValue=u;if(!u&&e.bool||/obj|func/.test(typeof u))p(r,o);if(typeof u=="function"){a(o,u,r,n,i)}else if(o=="if"){p(r,o);var f=e.stub;if(u){f&&c(f.parentNode,f,r)}else{f=e.stub=f||document.createTextNode("");c(r.parentNode,r,f)}}else if(/^(show|hide)$/.test(o)){p(r,o);if(o=="hide")u=!u;r.style.display=u?"":"none"}else if(o=="value"){r.value=u}else{if(e.bool){r[o]=u;if(!u)return;u=o}r.setAttribute(o,u)}})}function s(e,t){for(var n=0;n<(e||[]).length;n++){if(t(e[n],n)===false)n--}}function p(e,t){e.removeAttribute(t)}function d(e,t){t&&Object.keys(t).map(function(n){e[n]=t[n]});return e}function v(e){var t=e.trim().slice(1,3).toLowerCase(),n=/td|th/.test(t)?"tr":t=="tr"?"tbody":"div",i=document.createElement(n);i.stub=true;i.innerHTML=e;return i}function m(e,t){e=t(e)===false?e.nextSibling:e.firstChild;while(e){m(e,t);e=e.nextSibling}}function h(e,t){return e.filter(function(e){return t.indexOf(e)<0})}var g=[],b={},y;e.tag=function(t,n,i){y=y||(e.settings.brackets||"{ }").split(" ")[0];b[t]={name:t,tmpl:n,fn:i}};var w=e.mountTo=function(e,t,n){var i=b[t],r;if(i&&e){e.riot=0;r=new f(i,{root:e,opts:n})}if(r){g.push(r);return r.on("unmount",function(){g.splice(g.indexOf(r),1)})}};e.mount=function(e,t){if(e=="*")e=Object.keys(b).join(", ");var n=[];s(document.querySelectorAll(e),function(e){var i=e.tagName.toLowerCase(),r=w(e,i,t);if(r)n.push(r)});return n};e.update=function(){g.map(function(e){e.update()});return g};if(typeof exports==="object")module.exports=e;else if(typeof define==="function"&&define.amd)define(function(){return e});else this.riot=e})();


(function(e){var r=("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,"+"defaultchecked,defaultmuted,defaultselected,defer,disabled,draggable,enabled,formnovalidate,hidden,"+"indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,"+"pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,spellcheck,translate,truespeed,"+"typemustmatch,visible").split(",");var t="area,base,br,col,command,embed,hr,img,input,keygen,link,meta,param,source,track,wbr".split(",");var n={jade:h};var i={coffeescript:p,none:g,cs:p,es6:d,typescript:m,livescript:v,ls:v};var o=/^<([\w\-]+)>([^\x00]*[\w\-\/]>$)?([^\x00]*?)^<\/\1>/gim,a=/<script(\s+type=['"]?([^>'"]+)['"]?)?>([^\x00]*?)<\/script>/gm,c=/<!--.*?-->/g,u=/<([\w\-]+)([^>]*)\/\s*>/g,f=/^\s*\/\/.*$/gm,l=/\/\*[^\x00]*?\*\//gm;function s(e,n,i){e=e.replace(/\s+/g," ");e=e.trim().replace(c,"");e=e.replace(/=(\{[^\}]+\})([\s\/\>])/g,'="$1"$2');e=e.replace(/([\w\-]+)=["'](\{[^\}]+\})["']/g,function(e,t,n){if(r.indexOf(t.toLowerCase())>=0)t="__"+t;return t+'="'+n+'"'});if(n.expr){e=e.replace(/\{\s*([^\}]+)\s*\}/g,function(e,r){return"{"+y(r,n,i).trim().replace(/\r?\n|\r/g,"")+"}"})}e=e.replace(u,function(e,r,n){var i="<"+r+(n?" "+n.trim():"")+">";if(t.indexOf(r.toLowerCase())==-1)i+="</"+r+">";return i});e=e.replace(/'/g,"\\'");e=e.replace(/\\[{}]/g,"\\$&");if(n.compact)e=e.replace(/> </g,"><");return e}function p(e){return require("coffee-script").compile(e,{bare:true})}function d(e){return require("6to5").transform(e,{blacklist:["useStrict"]}).code}function m(e){return require("typescript-simple")(e)}function v(e){return require("LiveScript").compile(e,{bare:true,header:false})}function g(e){return e}function h(e){return require("jade").render(e,{pretty:true})}function w(e){e=e.replace(f,"").replace(l,"");var r=e.split("\n"),t="";r.forEach(function(e,n){var i=e.trim();if(i[0]!="}"&&i.indexOf("(")>0&&i.slice(-1)=="{"&&i.indexOf("function")==-1){var o=/(\s+)([\w]+)\s*\(([\w,\s]*)\)\s*\{/.exec(e);if(o&&!/^(if|while|switch|for)$/.test(o[2])){r[n]=o[1]+"this."+o[2]+" = function("+o[3]+") {";t=o[1]}}if(e.slice(0,t.length+1)==t+"}"){r[n]=t+t+"this.update()\n"+t+"}.bind(this);";t=""}});return r.join("\n")}function y(e,r,t){var n=r.parser||(t?i[t]:w);if(!n)throw new Error('Parser not found "'+t+'"');return n(e,r)}function x(e,r){var t=n[e];if(!t)throw new Error('Template parser not found "'+e+'"');return t(r)}function b(e,r){r=r||{};if(r.template)e=x(r.template,e);return e.replace(o,function(e,t,n,i){n=n||"";var o=r.type;if(!i.trim()){n=n.replace(a,function(e,r,t,n){if(t)o=t.replace("text/","");i=n;return""})}return"riot.tag('"+t+"', '"+s(n,r,o)+"', function(opts) {"+y(i,r,o)+"\n});"})}if(e){return module.exports={html:s,compile:b}}var q=document,k,E;function T(e,r){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState==4&&t.status==200)r(t.responseText)};t.open("GET",e,true);t.send("")}function $(e){var r=/[ \t]+/.exec(e);if(r)e=e.replace(new RegExp("^"+r[0],"gm"),"");return e}function L(e){var r=q.createElement("script"),t=q.documentElement;r.text=b(e);t.appendChild(r);t.removeChild(r)}function C(e){var r=q.querySelectorAll('script[type="riot/tag"]');[].map.call(r,function(t,n){var i=t.getAttribute("src");function o(t){L(t);if(n+1==r.length){k.trigger("ready");E=true;e&&e()}}return i?T(i,o):o($(t.innerHTML))})}riot.compile=function(e,r){if(typeof e=="string"){if(e.trim()[0]=="<"){var t=$(b(e));if(!r)L(t);return t}else{return T(e,function(e){var t=$(b(e));L(t);r&&r(t,e)})}}if(typeof e!="function")e=undefined;if(E)return e&&e();if(k){e&&k.on("ready",e)}else{k=riot.observable();C(e)}};var O=riot.mount,S=riot.mountTo;riot.mount=function(e,r){var t;riot.compile(function(){t=O(e,r)});return t};riot.mountTo=function(e,r,t){var n;riot.compile(function(){n=S(e,r,t)});return n}})(!this.top);

